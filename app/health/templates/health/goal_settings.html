{% extends 'health/base.html' %}

{% block title %}Health Goals{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title mb-0"><i class="fas fa-target"></i> Set Health Goals</h3>
            </div>
            <div class="card-body">
                <p class="text-muted">Define your fitness objectives to track your progress.</p>

                <form method="post">
                    {% csrf_token %}

                    <div class="mb-4">
                        <label for="{{ form.goal_type.id_for_label }}" class="form-label">Primary Goal</label>
                        {{ form.goal_type }}
                        {% if form.goal_type.errors %}
                            <div class="text-danger small">{{ form.goal_type.errors }}</div>
                        {% endif %}
                        <div class="form-text">Choose your main health objective.</div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="{{ form.target_weight.id_for_label }}" class="form-label">Target Weight (kg) <small class="text-muted">Optional</small></label>
                                {{ form.target_weight }}
                                {% if form.target_weight.errors %}
                                    <div class="text-danger small">{{ form.target_weight.errors }}</div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="{{ form.target_calories_burn.id_for_label }}" class="form-label">Daily Calories to Burn</label>
                                {{ form.target_calories_burn }}
                                {% if form.target_calories_burn.errors %}
                                    <div class="text-danger small">{{ form.target_calories_burn.errors }}</div>
                                {% endif %}
                                <div class="form-text">Recommended: 2000-2500 calories/day for active lifestyle</div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="{{ form.target_calories_consume.id_for_label }}" class="form-label">Daily Calories to Consume</label>
                                {{ form.target_calories_consume }}
                                {% if form.target_calories_consume.errors %}
                                    <div class="text-danger small">{{ form.target_calories_consume.errors }}</div>
                                {% endif %}
                                <div class="form-text">Based on your activity level and goals</div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="{{ form.target_protein.id_for_label }}" class="form-label">Daily Protein Target (g)</label>
                                {{ form.target_protein }}
                                {% if form.target_protein.errors %}
                                    <div class="text-danger small">{{ form.target_protein.errors }}</div>
                                {% endif %}
                                <div class="form-text">Recommended: 1.6-2.2g per kg of body weight</div>
                            </div>
                        </div>
                    </div>

                    <div class="mb-4">
                        <label for="{{ form.target_activity_days.id_for_label }}" class="form-label">Activity Days per Week</label>
                        {{ form.target_activity_days }}
                        {% if form.target_activity_days.errors %}
                            <div class="text-danger small">{{ form.target_activity_days.errors }}</div>
                        {% endif %}
                        <div class="form-text">How many days per week do you plan to be active?</div>
                    </div>

                    <button type="submit" class="btn btn-primary">Save Goals</button>
                    <a href="{% url 'dashboard' %}" class="btn btn-secondary">Cancel</a>
                </form>
            </div>
        </div>

        {% if goal %}
        <div class="card mt-4">
            <div class="card-header">
                <h5 class="mb-0">Current Goals</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <p><strong>Goal Type:</strong> {{ goal.get_goal_type_display }}</p>
                        <p><strong>Target Weight:</strong> {% if goal.target_weight %}{{ goal.target_weight }} kg{% else %}Not set{% endif %}</p>
                        <p><strong>Daily Calories to Burn:</strong> {{ goal.target_calories_burn }}</p>
                    </div>
                    <div class="col-md-6">
                        <p><strong>Daily Calories to Consume:</strong> {{ goal.target_calories_consume }}</p>
                        <p><strong>Daily Protein Target:</strong> {{ goal.target_protein }}g</p>
                        <p><strong>Activity Days/Week:</strong> {{ goal.target_activity_days }}</p>
                    </div>
                </div>
                <p class="text-muted small">Last updated: {{ goal.updated_at|date:"M d, Y" }}</p>
            </div>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}